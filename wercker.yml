box: debian
build:
  steps:
    - script:
        name: update
        code: |
          apt-get update
    - script:
        name: install git
        code: |
          apt-get install git -y
    - script:
        name: install nodejs
        code: |
          apt-get install nodejs -y
    - script:
        name: install npm
        code: |
          apt-get install npm -y
    - script:
      name: Run npm run build
      code: |
        npm install
    - arjen/hugo-build:
        version: 0.15
        flags: --buildDrafts=true
        config: config.yml
    - samueldebruyn/minify:
        css: false

deploy:
  steps:
    - script:
        name: install git
        code: |
          apt-get update && apt-get install git -y
    - lukevivier/gh-pages@0.2.1:
        token:   $GITHUB_TOKEN
        domain:  support.growthbeat.com
        basedir: public
